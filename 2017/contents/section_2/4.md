# Railsコマンドを使いこなす

```
rails new app_name (-d mysql)
view: application.html.erb　埋め込みしてる
演習　4〜5回

rails generate controller home
routing controller view
演習　5〜6回

root_to: home#index
演習　1回

config/database.ymlの設定
rake db:create
routing => controller => model => view
rails g model <model_name>
vim db/migrate/jfiejaiefjei
rake db:migrate
rake db:rollback

User.find(1)
User.all
User.where(id: 1)
User.where(‘id < ?’, 3).first
User.order(“id ASC”)
User.order(“id DESC”)
User.select(“id, name”);
User.limit(5)
User.count
User.new
User.save
User.update(“id = 1”)
User.destroy()
User.create(name: => ‘’, user_id: => ‘’)
User.attributes

rake db:create データベースをconfig/database.ymlに従って作るコマンド
rails generate model <model_name> <model_name>のモデルクラスとマイグレーションを自動で作成するコマンド
<model_name>は全て小文字単数形・・・retasu
<table_name>は全て小文字複数形・・・retasus
モデルクラス名は頭文字だけ大文字単数形・・・Retasu
user
users
User

activerecord
new
save
find(id)
where(hash)

rails generate migration AddColumnToUsers;
model: User
db:       users
rails g model: user

belongs_to
has_many
hasmany      , belongs_to, belongs_to,        has_many


rails g migration <>

AddColumnToUser
add_column_to_user













deviseの使い方

rails g devise:install

User_model_create

bundle exec rails g devise user
db/migrate/___device_create_user の編集
bundle exec rake db:migrate


rails g devise:views

app/views/layouts/application.html.erbの編集、ログインボタン、ログアウトボタン、を共通viewのつける

現在ログインしているUserモデルのインスタンス //// current_user
current_user.id
current_user.name

link_toでのURL自動生成メソッド一覧
<#action>_user_<controller>_path

app/controllers/application_controller.rb

before_action :authenticate_user!


mail認証の実装

config/initializers/devise.rb
Devise.setup do |config|
  (省略)...
  # mail setting
  config.mailer_sender = "gmailメールアドレス"
end

config/environments/development.rb
config.action_mailer.smtp_settings = {
  :enable_starttls_auto => true,
  :address => "smtp.gmail.com",
  :port => 587,
  :domain => 'smtp.gmail.com',
  :user_name => "xxxxxxx@gmail.com", #gmailアドレス
  :password => "xxxxxxxxxxx", #gmailパスワード
  :authentication => 'login',
}

app/models/user.rb
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable,
         :validatable, :confirmable, :authentication_keys => [:login]


```